TODO:

 * Make params const wherever possible

